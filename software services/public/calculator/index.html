<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLSC Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Inter',sans-serif;background:#0a0a0a;min-height:100vh;color:#fff;overflow-x:hidden}
        .header{position:fixed;top:0;left:0;right:0;padding:20px 30px;display:flex;justify-content:space-between;align-items:center;background:rgba(10,10,10,0.9);backdrop-filter:blur(10px);z-index:100}
        .back-btn{padding:10px 20px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:100px;color:#fff;text-decoration:none;font-size:14px;transition:all 0.3s}
        .back-btn:hover{background:#3fb950;color:#000;border-color:#3fb950}
        .logo{display:flex;align-items:center;gap:10px;color:#fff;font-size:18px;font-weight:700}
        .logo i{color:#3fb950;font-size:24px}
        .view-modes{display:flex;gap:8px}
        .view-btn{width:40px;height:40px;border-radius:10px;border:1px solid rgba(255,255,255,0.2);background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.6);cursor:pointer;transition:all 0.3s;display:flex;align-items:center;justify-content:center;font-size:16px}
        .view-btn:hover{background:rgba(255,255,255,0.1);color:#fff}
        .view-btn.active{background:rgba(63,185,80,0.2);border-color:#3fb950;color:#3fb950}
        
        /* Device Frame Container */
        .device-frame{margin:80px auto 20px;transition:all 0.3s;background:#0a0a0a;position:relative;overflow-y:auto;min-height:calc(100vh - 100px)}
        .device-frame.mobile-view{width:375px;border:3px solid #333;border-radius:30px;box-shadow:0 0 0 10px #1a1a1a,0 20px 60px rgba(0,0,0,0.5)}
        .device-frame.tablet-view{width:768px;border:3px solid #333;border-radius:20px;box-shadow:0 0 0 8px #1a1a1a,0 20px 60px rgba(0,0,0,0.5)}
        .device-frame.laptop-view{width:100%;max-width:100%;border:none;border-radius:0;box-shadow:none}
        
        .device-frame::before{content:'';position:absolute;top:8px;left:50%;transform:translateX(-50%);width:60px;height:6px;background:#333;border-radius:3px;z-index:10}
        .device-frame.laptop-view::before{display:none}
        
        .calculator-wrapper{display:flex;align-items:center;justify-content:center;padding:20px;min-height:100%}
        .calculator{background:linear-gradient(145deg,#1a1a1a,#0f0f0f);border:1px solid rgba(255,255,255,0.1);border-radius:24px;padding:24px;width:340px;box-shadow:0 20px 60px rgba(0,0,0,0.5)}
        .display{background:#0a0a0a;border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:20px;margin-bottom:20px;text-align:right;min-height:100px;display:flex;flex-direction:column;justify-content:flex-end}
        .expression{color:rgba(255,255,255,0.5);font-size:16px;min-height:24px;word-break:break-all}
        .result{font-size:42px;font-weight:700;color:#fff;word-break:break-all}
        .buttons{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
        .btn{padding:20px;border:none;border-radius:14px;font-size:20px;font-weight:600;cursor:pointer;transition:all 0.2s}
        .btn:hover{transform:scale(1.05)}
        .btn:active{transform:scale(0.95)}
        .btn-num{background:rgba(255,255,255,0.08);color:#fff}
        .btn-num:hover{background:rgba(255,255,255,0.15)}
        .btn-op{background:rgba(63,185,80,0.2);color:#3fb950}
        .btn-op:hover{background:rgba(63,185,80,0.3)}
        .btn-func{background:rgba(88,166,255,0.15);color:#58a6ff}
        .btn-func:hover{background:rgba(88,166,255,0.25)}
        .btn-eq{background:linear-gradient(135deg,#3fb950,#2ea043);color:#fff;grid-column:span 2}
        .btn-eq:hover{box-shadow:0 5px 20px rgba(63,185,80,0.4)}
        .btn-clear{background:rgba(239,68,68,0.2);color:#ef4444}
        .btn-clear:hover{background:rgba(239,68,68,0.3)}
        .mode-tabs{display:flex;gap:8px;margin-bottom:16px}
        .mode-tab{flex:1;padding:10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:rgba(255,255,255,0.6);font-size:13px;cursor:pointer;text-align:center;transition:all 0.3s}
        .mode-tab.active{background:rgba(63,185,80,0.15);border-color:#3fb950;color:#3fb950}
        .history{margin-top:20px;max-height:150px;overflow-y:auto}
        .history-title{font-size:13px;color:rgba(255,255,255,0.5);margin-bottom:10px}
        .history-item{padding:8px 12px;background:rgba(255,255,255,0.03);border-radius:8px;margin-bottom:6px;font-size:13px;color:rgba(255,255,255,0.7);cursor:pointer}
        .history-item:hover{background:rgba(255,255,255,0.08)}
        .history-item span{color:#3fb950;float:right}
    </style>
</head>
<body>
    <div class="header">
        <a href="../bla/bla.html" class="back-btn"><i class="fas fa-arrow-left"></i> Back</a>
        <div class="logo"><i class="fas fa-calculator"></i> BLSC Calculator</div>
        <div class="view-modes">
            <button class="view-btn" onclick="setView('mobile')" title="Mobile View (375px)"><i class="fas fa-mobile-alt"></i></button>
            <button class="view-btn" onclick="setView('tablet')" title="Tablet View (768px)"><i class="fas fa-tablet-alt"></i></button>
            <button class="view-btn active" onclick="setView('laptop')" title="Laptop View (Full)"><i class="fas fa-laptop"></i></button>
        </div>
    </div>
    
    <div class="device-frame laptop-view" id="deviceFrame">
    <div class="calculator-wrapper" id="calcWrapper">
        <div class="calculator">
        <div class="mode-tabs">
            <div class="mode-tab active" onclick="setMode('basic')">Basic</div>
            <div class="mode-tab" onclick="setMode('scientific')">Scientific</div>
        </div>
        
        <div class="display">
            <div class="expression" id="expression"></div>
            <div class="result" id="result">0</div>
        </div>
        
        <div class="buttons" id="buttons"></div>
        
        <div class="history" id="historySection" style="display:none">
            <div class="history-title">History</div>
            <div id="historyList"></div>
        </div>
    </div>
    </div>
    </div>
</body>
</html>

<script>
let expression = '';
let result = '0';
let history = [];
let mode = 'basic';

const basicButtons = [
    {text:'C',class:'btn-clear',action:'clear'},
    {text:'⌫',class:'btn-func',action:'backspace'},
    {text:'%',class:'btn-func',action:'percent'},
    {text:'÷',class:'btn-op',action:'op',value:'/'},
    {text:'7',class:'btn-num',action:'num'},
    {text:'8',class:'btn-num',action:'num'},
    {text:'9',class:'btn-num',action:'num'},
    {text:'×',class:'btn-op',action:'op',value:'*'},
    {text:'4',class:'btn-num',action:'num'},
    {text:'5',class:'btn-num',action:'num'},
    {text:'6',class:'btn-num',action:'num'},
    {text:'-',class:'btn-op',action:'op',value:'-'},
    {text:'1',class:'btn-num',action:'num'},
    {text:'2',class:'btn-num',action:'num'},
    {text:'3',class:'btn-num',action:'num'},
    {text:'+',class:'btn-op',action:'op',value:'+'},
    {text:'±',class:'btn-func',action:'negate'},
    {text:'0',class:'btn-num',action:'num'},
    {text:'.',class:'btn-num',action:'decimal'},
    {text:'=',class:'btn-eq',action:'equals'}
];

const scientificButtons = [
    {text:'C',class:'btn-clear',action:'clear'},
    {text:'(',class:'btn-func',action:'bracket'},
    {text:')',class:'btn-func',action:'bracket'},
    {text:'⌫',class:'btn-func',action:'backspace'},
    {text:'sin',class:'btn-func',action:'func'},
    {text:'cos',class:'btn-func',action:'func'},
    {text:'tan',class:'btn-func',action:'func'},
    {text:'÷',class:'btn-op',action:'op',value:'/'},
    {text:'√',class:'btn-func',action:'sqrt'},
    {text:'x²',class:'btn-func',action:'square'},
    {text:'xʸ',class:'btn-func',action:'power'},
    {text:'×',class:'btn-op',action:'op',value:'*'},
    {text:'7',class:'btn-num',action:'num'},
    {text:'8',class:'btn-num',action:'num'},
    {text:'9',class:'btn-num',action:'num'},
    {text:'-',class:'btn-op',action:'op',value:'-'},
    {text:'4',class:'btn-num',action:'num'},
    {text:'5',class:'btn-num',action:'num'},
    {text:'6',class:'btn-num',action:'num'},
    {text:'+',class:'btn-op',action:'op',value:'+'},
    {text:'1',class:'btn-num',action:'num'},
    {text:'2',class:'btn-num',action:'num'},
    {text:'3',class:'btn-num',action:'num'},
    {text:'%',class:'btn-func',action:'percent'},
    {text:'π',class:'btn-func',action:'pi'},
    {text:'0',class:'btn-num',action:'num'},
    {text:'.',class:'btn-num',action:'decimal'},
    {text:'=',class:'btn-eq',action:'equals'}
];

function setMode(m) {
    mode = m;
    document.querySelectorAll('.mode-tab').forEach((t,i) => {
        t.classList.toggle('active', (i === 0 && m === 'basic') || (i === 1 && m === 'scientific'));
    });
    renderButtons();
}

function renderButtons() {
    const btns = mode === 'basic' ? basicButtons : scientificButtons;
    const container = document.getElementById('buttons');
    container.innerHTML = btns.map(b => 
        `<button class="btn ${b.class}" onclick="handleButton('${b.action}','${b.value||b.text}')">${b.text}</button>`
    ).join('');
}

function handleButton(action, value) {
    switch(action) {
        case 'num':
            if (result === '0' && value !== '0') result = value;
            else if (result === '0' && value === '0') result = '0';
            else result += value;
            break;
        case 'decimal':
            if (!result.includes('.')) result += '.';
            break;
        case 'op':
            expression += result + ' ' + value + ' ';
            result = '0';
            break;
        case 'equals':
            calculate();
            break;
        case 'clear':
            expression = '';
            result = '0';
            break;
        case 'backspace':
            result = result.length > 1 ? result.slice(0,-1) : '0';
            break;
        case 'percent':
            result = (parseFloat(result) / 100).toString();
            break;
        case 'negate':
            result = (parseFloat(result) * -1).toString();
            break;
        case 'sqrt':
            result = Math.sqrt(parseFloat(result)).toString();
            break;
        case 'square':
            result = Math.pow(parseFloat(result), 2).toString();
            break;
        case 'power':
            expression += result + ' ** ';
            result = '0';
            break;
        case 'func':
            if (value === 'sin') result = Math.sin(parseFloat(result) * Math.PI / 180).toString();
            if (value === 'cos') result = Math.cos(parseFloat(result) * Math.PI / 180).toString();
            if (value === 'tan') result = Math.tan(parseFloat(result) * Math.PI / 180).toString();
            break;
        case 'pi':
            result = Math.PI.toString();
            break;
        case 'bracket':
            expression += value + ' ';
            break;
    }
    updateDisplay();
}

function calculate() {
    try {
        const fullExpr = expression + result;
        const evalExpr = fullExpr.replace(/×/g,'*').replace(/÷/g,'/');
        const calcResult = eval(evalExpr);
        
        if (isNaN(calcResult) || !isFinite(calcResult)) {
            result = 'Error';
        } else {
            // Add to history
            history.unshift({ expr: fullExpr, result: calcResult });
            if (history.length > 10) history.pop();
            
            result = parseFloat(calcResult.toFixed(10)).toString();
            expression = '';
        }
    } catch (e) {
        result = 'Error';
    }
    updateDisplay();
    renderHistory();
}

function updateDisplay() {
    document.getElementById('expression').textContent = expression;
    document.getElementById('result').textContent = result;
}

function renderHistory() {
    const section = document.getElementById('historySection');
    const list = document.getElementById('historyList');
    
    if (history.length > 0) {
        section.style.display = 'block';
        list.innerHTML = history.map(h => 
            `<div class="history-item" onclick="useHistory('${h.result}')">${h.expr} <span>= ${h.result}</span></div>`
        ).join('');
    }
}

function useHistory(val) {
    result = val;
    updateDisplay();
}

// Keyboard support
document.addEventListener('keydown', (e) => {
    if (e.key >= '0' && e.key <= '9') handleButton('num', e.key);
    else if (e.key === '.') handleButton('decimal', '.');
    else if (e.key === '+') handleButton('op', '+');
    else if (e.key === '-') handleButton('op', '-');
    else if (e.key === '*') handleButton('op', '*');
    else if (e.key === '/') handleButton('op', '/');
    else if (e.key === 'Enter' || e.key === '=') handleButton('equals', '=');
    else if (e.key === 'Escape') handleButton('clear', 'C');
    else if (e.key === 'Backspace') handleButton('backspace', '⌫');
});

renderButtons();

// View mode switching - changes width like device simulation
function setView(viewMode) {
    const frame = document.getElementById('deviceFrame');
    frame.className = 'device-frame ' + viewMode + '-view';
    
    document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
    event.target.closest('.view-btn').classList.add('active');
}
</script>
